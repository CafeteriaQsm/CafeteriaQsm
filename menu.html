<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #c62828;
            --primary-light: #ff5f52;
            --primary-dark: #8e0000;
            --secondary-color: #ffb74d;
            --accent-color: #ff9800;
            --light-bg: #fff8f0;
            --card-bg: #ffffff;
            --text-dark: #3e2723;
            --text-light: #5d4037;
            --shadow: 0 4px 12px rgba(198, 40, 40, 0.15);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            direction: rtl;
            text-align: right;
            background-color: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: bold;
        }

            .logo i {
                font-size: 2rem;
            }

        .user-info-area {
            display: flex;
            align-items: center;
            gap: 15px; /* ØªØ¨Ø§Ø¹Ø¯ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ± */
        }

        #userInfo {
            text-align: center;
            padding-right: 15px; /* ØªØ¨Ø§Ø¹Ø¯ Ø¹Ù† Ø´Ø¹Ø§Ø± Ø§Ù„Ø³Ù„Ø© */
            border-right: 1px solid rgba(255, 255, 255, 0.3);
        }

        #usernameDisplay {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: white; /* Ù„ÙˆÙ† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
        }
        
        #logoutBtn {
            /* Ø§Ø³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø³ØªØ§ÙŠÙ„ cart-link Ù…Ø¹ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ø³ÙŠØ·Ø© Ù„ØªÙ…ÙŠÙŠØ²Ù‡ */
            background-color: var(--secondary-color);
            color: var(--text-dark);
            padding: 5px 10px;
            border: none;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

            #logoutBtn:hover {
                background-color: var(--accent-color);
                transform: translateY(-2px);
            }

        .cart-link {
            background-color: white;
            color: var(--primary-color);
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

            .cart-link:hover {
                background-color: var(--secondary-color);
                transform: translateY(-2px);
            }

        .categories {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            display: flex;
            overflow-x: auto;
            padding: 15px 10px;
            gap: 10px;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 80px;
            z-index: 90;
        }

        .category-btn {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            background-color: white;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 16px;
            border-radius: 50px;
            white-space: nowrap;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

            .category-btn.active, .category-btn:hover {
                background-color: var(--primary-color);
                color: white;
            }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .section-title {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            color: var(--primary-color);
            margin: 30px 0 20px;
            padding-bottom: 10px;
            border-bottom: 2px dashed var(--secondary-color);
            font-size: 1.8rem;
        }

        .menu-container {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .meal-card {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            background-color: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
        }

            .meal-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 12px 20px rgba(198, 40, 40, 0.2);
            }

            .meal-card img {
                /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
                width: 100%;
                height: 180px;
                object-fit: cover;
                transition: var(--transition);
            }

            .meal-card:hover img {
                transform: scale(1.05);
            }

        .meal-content {
            padding: 15px;
        }

        .meal-card h3 {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 1.3rem;
        }

        .meal-card p {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            color: var(--text-light);
            margin-bottom: 15px;
        }

        .price {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.2rem;
            display: block;
            margin-bottom: 15px;
        }

        .meal-card button {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            background: linear-gradient(to right, var(--primary-color), var(--primary-light));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            font-size: 1rem;
            transition: var(--transition);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

            .meal-card button:hover {
                background: linear-gradient(to right, var(--primary-dark), var(--primary-color));
                transform: translateY(-2px);
            }

        .badge {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: var(--secondary-color);
            color: var(--text-dark);
            padding: 5px 10px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Modal Styles */
        .modal {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            /* Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            background-color: var(--card-bg);
            margin: auto; /* ØªÙ… ØªØ¹Ø¯ÙŠÙ„ margin Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ flex */
            padding: 25px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            text-align: right;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: modalFade 0.3s;
        }

        @keyframes modalFade {
            /* ... (Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ... */
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ... (Ø¨Ù‚ÙŠØ© Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ù…ÙˆØ¯Ø§Ù„) ... */

        .modal-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px;
        }

        .modal button {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .add-btn {
            background: linear-gradient(to right, var(--primary-color), var(--primary-light));
            color: white;
            font-weight: bold;
        }

            .add-btn:hover {
                background: linear-gradient(to right, var(--primary-dark), var(--primary-color));
                transform: translateY(-2px);
            }

        .close-btn {
            background-color: #f1f1f1;
            color: var(--text-dark);
            font-weight: bold;
        }

            .close-btn:hover {
                background-color: #ddd;
                transform: translateY(-2px);
            }

        /* Ø³ØªØ§ÙŠÙ„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ */
        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translate(-50%, -20px);
            }

            10% {
                opacity: 1;
                transform: translate(-50%, 0);
            }

            90% {
                opacity: 1;
                transform: translate(-50%, 0);
            }

            100% {
                opacity: 0;
                transform: translate(-50%, -20px);
            }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }

            .user-info-area {
                width: 100%;
                justify-content: space-around;
            }

            #userInfo {
                padding-right: 0;
                border-right: none;
            }

            .menu-container {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .modal-content {
                width: 95%;
            }

            .modal-buttons {
                flex-direction: column;
            }

            .modal button {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <span>Ù…Ø·Ø¹Ù…Ù†Ø§ Ø§Ù„Ø´Ù‡ÙŠ</span>
            </div>
            <div class="user-info-area">
                <div id="userInfo" style="display: none;">
                    <p id="usernameDisplay"></p>
                    <button id="logoutBtn"><i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
                </div>
                <a href="cart.html" class="cart-link" id="cartLink">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Ø§Ù„Ø³Ù„Ø©</span>
                    <span id="cartCount" style="background-color: var(--primary-color); color: white; border-radius: 50%; padding: 2px 7px; font-size: 0.8rem; margin-right: 5px;">0</span>
                </a>
            </div>
        </div>
    </header>

    <div class="categories">
        <button class="category-btn active" data-category="all">Ø§Ù„ÙƒÙ„</button>
        <button class="category-btn" data-category="main">ÙˆØ¬Ø¨Ø§Øª Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="category-btn" data-category="italian">Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§ÙŠØ·Ø§Ù„ÙŠØ©</button>
        <button class="category-btn" data-category="home">Ø§ÙƒÙ„ Ø¨ÙŠØªÙŠ</button>
        <button class="category-btn" data-category="salads">Ø³Ù„Ø·Ø§Øª</button>
        <button class="category-btn" data-category="sandwiches">Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´Ø§Øª</button>
        <button class="category-btn" data-category="pastries">Ù…Ø¹Ø¬Ù†Ø§Øª</button>
        <button class="category-btn" data-category="drinks">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</button>
    </div>

    <div class="container">
        <h2 class="section-title" data-category="main">Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
        <div class="menu-container" id="mainDishes"></div>
        <h2 class="section-title" data-category="italian">Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ©</h2>
        <div class="menu-container" id="italianDishes"></div>
        <h2 class="section-title" data-category="home">Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„Ø¨ÙŠØªÙŠ</h2>
        <div class="menu-container" id="homeDishes"></div>
        <h2 class="section-title" data-category="salads">Ø§Ù„Ø³Ù„Ø·Ø§Øª</h2>
        <div class="menu-container" id="salads"></div>
        <h2 class="section-title" data-category="sandwiches">Ø§Ù„Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´Ø§Øª</h2>
        <div class="menu-container" id="sandwiches"></div>
        <h2 class="section-title" data-category="pastries">Ø§Ù„Ù…Ø¹Ø¬Ù†Ø§Øª</h2>
        <div class="menu-container" id="pastries"></div>
        <h2 class="section-title" data-category="drinks">Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª</h2>
        <div class="menu-container" id="drinks"></div>
    </div>

    <div id="extrasModal" class="modal">
        <div class="modal-content">
            <h3 id="modalMealName"></h3>
            <p id="modalMealPrice" class="price"></p>
            <p id="modalMealDesc" style="color: var(--text-light); margin-bottom: 20px;"></p>

            <div class="modal-item-img" style="text-align: center; margin-bottom: 20px;">
                <img id="modalMealImg" src="" alt="ØµÙˆØ±Ø© Ø§Ù„ÙˆØ¬Ø¨Ø©" style="max-width: 100%; height: auto; border-radius: 10px; max-height: 200px; object-fit: cover;">
            </div>

            <div class="extras" id="modalExtras">
                <h4><i class="fas fa-plus-circle"></i> Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</h4>
                <div class="extras-grid" id="extrasGrid">
                    </div>
            </div>

            <div class="modal-buttons">
                <button class="close-btn" onclick="closeModal()"><i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡</button>
                <button class="add-btn" id="addToCartButton" onclick="addToCart()"><i class="fas fa-cart-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCu4ged4p8GzaQo4DFbY_sthYWHSvSYqpU",
            authDomain: "cafeteria-students-app.firebaseapp.com",
            databaseURL: "https://cafeteria-students-app-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "cafeteria-students-app",
            storageBucket: "cafeteria-students-app.appspot.com",
            messagingSenderId: "338557210649",
            appId: "1:338557210649:web:ba36c4623b4677ca585a88"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        let currentMeal = null; // Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„ÙˆØ¬Ø¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„Ù…ÙˆØ¯Ø§Ù„

        // ... (Ø¨Ù‚ÙŠØ© ØªØ¹Ø±ÙŠÙØ§Øª meals Ùˆ extras) ...
        const meals = [
            { name: "Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠØ©", price: 25, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Chicken-Shawarma.jpg", hasExtras: true, category: "main" },
            { name: "ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ", price: 30, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Grilled-Chicken-Breast.jpg", hasExtras: false, category: "main" },
            { name: "Ø´Ù†ÙŠØªØ³Ù„ Ø¯Ø¬Ø§Ø¬", price: 28, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Chicken-Schnitzel.jpg", hasExtras: true, category: "main" },
            { name: "ÙƒÙØªØ© Ù…Ø´ÙˆÙŠØ©", price: 32, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Grilled-Kofta.jpg", hasExtras: false, category: "main" },

            // Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ©
            { name: "Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±ØºØ±ÙŠØªØ§", price: 35, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Pizza-Margherita.jpg", hasExtras: true, category: "italian" },
            { name: "Ø¨Ø§Ø³ØªØ§ ÙƒØ§Ø±Ø¨ÙˆÙ†Ø§Ø±Ø§", price: 40, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Pasta-Carbonara.jpg", hasExtras: false, category: "italian" },
            { name: "Ù„Ø§Ø²Ø§Ù†ÙŠØ§", price: 45, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Lasagna.jpg", hasExtras: false, category: "italian" },

            // Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„Ø¨ÙŠØªÙŠ
            { name: "Ù…Ù†Ø³Ù", price: 50, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Mansaf.jpg", hasExtras: false, category: "home" },
            { name: "Ù…Ø³Ø®Ù†", price: 40, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Musakhan.jpg", hasExtras: false, category: "home" },
            { name: "Ù…Ø­Ø´ÙŠ ÙˆØ±Ù‚ Ø¹Ù†Ø¨", price: 35, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Stuffed-Grape-Leaves.jpg", hasExtras: false, category: "home" },

            // Ø§Ù„Ø³Ù„Ø·Ø§Øª
            { name: "Ø³Ù„Ø·Ø© ÙŠÙˆÙ†Ø§Ù†ÙŠØ©", price: 20, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Greek-Salad.jpg", hasExtras: false, category: "salads" },
            { name: "Ø³Ù„Ø·Ø© Ø³ÙŠØ²Ø±", price: 22, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Caesar-Salad.jpg", hasExtras: false, category: "salads" },
            { name: "ØªØ¨ÙˆÙ„Ø©", price: 15, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Tabbouleh.jpg", hasExtras: false, category: "salads" },

            // Ø§Ù„Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´Ø§Øª
            { name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ Ø´Ø§ÙˆØ±Ù…Ø§", price: 18, img: "https://i0.wp.com/www.chefahmed.com/wp-content/uploads/2021/04/Chicken-Shawarma-Sandwich.jpg", hasExtras: true, category: "sandwiches" },
            { name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙƒÙØªØ©", price: 20, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Kofta-Sandwich.jpg", hasExtras: true, category: "sandwiches" },
            { name: "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„", price: 12, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Falafel-Sandwich.jpg", hasExtras: true, category: "sandwiches" },
            { name: "ØªÙˆØ³Øª Ø¬Ø¨Ù†", price: 10, img: "https://www.jacobs-agadatlechem.com/wp-content/uploads/2021/10/DAS1989-scaled-e1633924343146.jpg", hasExtras: true, category: "sandwiches" },

            // Ø§Ù„Ù…Ø¹Ø¬Ù†Ø§Øª
            { name: "Ù…Ù†Ø§Ù‚ÙŠØ´ Ø²Ø¹ØªØ±", price: 12, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Manakeesh-Zaatar.jpg", hasExtras: false, category: "pastries" },
            { name: "Ø³Ù…Ø¨ÙˆØ³Ø©", price: 15, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Sambousek.jpg", hasExtras: false, category: "pastries" },
            { name: "ÙØ·Ø§Ø¦Ø± Ø³Ø¨Ø§Ù†Ø®", price: 14, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Spinach-Fatayer.jpg", hasExtras: false, category: "pastries" },

            // Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª
            { name: "Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø§Ø²Ø¬", price: 8, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Orange-Juice.jpg", hasExtras: false, category: "drinks" },
            { name: "Ù‚Ù‡ÙˆØ© Ø³Ø§Ø®Ù†Ø©", price: 7, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Hot-Coffee.jpg", hasExtras: false, category: "drinks" },
            { name: "Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ", price: 5, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Soft-Drink.jpg", hasExtras: false, category: "drinks" },
            { name: "Ù…Ø§Ø¡ Ù…Ø¹Ø¯Ù†ÙŠ", price: 3, img: "https://www.chefahmed.com/wp-content/uploads/2020/06/Water.jpg", hasExtras: false, category: "drinks" },
        ];

        const mealDescriptions = {
            "Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠØ©": "Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠØ© Ù…Ø¹ Ø®Ø¨Ø² Ø·Ø§Ø²Ø¬ ÙˆØªÙˆØ§Ø¨Ù„ Ù…Ù…ÙŠØ²Ø©",
            "ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ": "ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ Ù…Ø¹ Ø£Ø±Ø² ÙˆØ®Ø¶Ø§Ø±",
            "Ø´Ù†ÙŠØªØ³Ù„ Ø¯Ø¬Ø§Ø¬": "Ø´Ù†ÙŠØªØ³Ù„ Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ø±Ù…Ø´ Ù…Ø¹ Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ©",
            "ÙƒÙØªØ© Ù…Ø´ÙˆÙŠØ©": "ÙƒÙØªØ© Ù„Ø­Ù… Ù…Ø´ÙˆÙŠØ© Ù…Ø¹ Ø£Ø±Ø² ÙˆØ®Ø¶Ø§Ø±",
            "Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±ØºØ±ÙŠØªØ§": "Ø¨ÙŠØªØ²Ø§ Ø¥ÙŠØ·Ø§Ù„ÙŠØ© ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ù…Ø¹ Ø¬Ø¨Ù† Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§ ÙˆØ·Ù…Ø§Ø·Ù…",
            "Ø¨Ø§Ø³ØªØ§ ÙƒØ§Ø±Ø¨ÙˆÙ†Ø§Ø±Ø§": "Ø¨Ø§Ø³ØªØ§ ÙƒØ±ÙŠÙ…ÙŠ Ù…Ø¹ Ù„Ø­Ù… Ù…Ù‚Ø¯Ø¯ ÙˆØ¬Ø¨Ù† Ø¨Ø§Ø±Ù…ÙŠØ²Ø§Ù†",
            "Ù„Ø§Ø²Ø§Ù†ÙŠØ§": "Ù„Ø§Ø²Ø§Ù†ÙŠØ§ Ø¥ÙŠØ·Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ù„Ø­Ù… ÙˆØ§Ù„Ø¬Ø¨Ù† ÙˆØ§Ù„ØµÙ„ØµØ©",
            "Ù…Ù†Ø³Ù": "Ø§Ù„Ø·Ø¨Ù‚ Ø§Ù„ÙˆØ·Ù†ÙŠ Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ Ù…Ø¹ Ø§Ù„Ù„Ø­Ù… ÙˆØ§Ù„Ø£Ø±Ø² ÙˆØ§Ù„Ø¬Ù…ÙŠØ¯",
            "Ù…Ø³Ø®Ù†": "Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ Ù…Ø¹ Ø¨ØµÙ„ ÙˆØ²ÙŠØª Ø²ÙŠØªÙˆÙ† Ø¹Ù„Ù‰ Ø®Ø¨Ø² Ø·Ø§Ø¨ÙˆÙ†",
            "Ù…Ø­Ø´ÙŠ ÙˆØ±Ù‚ Ø¹Ù†Ø¨": "ÙˆØ±Ù‚ Ø¹Ù†Ø¨ Ù…Ø­Ø´ÙŠ Ø¨Ø§Ù„Ø£Ø±Ø² ÙˆØ§Ù„Ù„Ø­Ù…",
            "Ø³Ù„Ø·Ø© ÙŠÙˆÙ†Ø§Ù†ÙŠØ©": "Ø®Ø³ØŒ Ø·Ù…Ø§Ø·Ù…ØŒ Ø®ÙŠØ§Ø±ØŒ Ø²ÙŠØªÙˆÙ†ØŒ Ø¬Ø¨Ù†Ø© ÙÙŠØªØ§",
            "Ø³Ù„Ø·Ø© Ø³ÙŠØ²Ø±": "Ø®Ø³ØŒ ÙƒØ±Ø§ÙˆØªÙˆÙ†ØŒ Ø¬Ø¨Ù† Ø¨Ø§Ø±Ù…ÙŠØ²Ø§Ù†ØŒ ØµÙ„ØµØ© Ø³ÙŠØ²Ø±",
            "ØªØ¨ÙˆÙ„Ø©": "Ø¨Ù‚Ø¯ÙˆÙ†Ø³ØŒ Ø¨Ù†Ø¯ÙˆØ±Ø©ØŒ Ø¨ØµÙ„ØŒ Ø¨Ø±ØºÙ„ØŒ Ø²ÙŠØª Ø²ÙŠØªÙˆÙ† ÙˆÙ„ÙŠÙ…ÙˆÙ†",
            "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ Ø´Ø§ÙˆØ±Ù…Ø§": "Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬ ÙÙŠ Ø®Ø¨Ø² Ø·Ø§Ø²Ø¬ Ù…Ø¹ ØµÙ„ØµØ§Øª",
            "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙƒÙØªØ©": "ÙƒÙØªØ© Ù„Ø­Ù… ÙÙŠ Ø®Ø¨Ø² Ø·Ø§Ø²Ø¬ Ù…Ø¹ Ø®Ø¶Ø§Ø±",
            "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„": "ÙÙ„Ø§ÙÙ„ Ù…Ù‚Ø±Ù…Ø´Ø© ÙÙŠ Ø®Ø¨Ø² Ø·Ø§Ø²Ø¬ Ù…Ø¹ Ø®Ø¶Ø§Ø±",
            "ØªÙˆØ³Øª Ø¬Ø¨Ù†": "ØªÙˆØ³Øª Ù…Ø­Ù…Øµ Ù…Ø¹ Ø§Ù„Ø¬Ø¨Ù†",
            "Ù…Ù†Ø§Ù‚ÙŠØ´ Ø²Ø¹ØªØ±": "Ù…Ù†Ø§Ù‚ÙŠØ´ Ø¨Ø§Ù„Ø²Ø¹ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠ ÙˆØ²ÙŠØª Ø§Ù„Ø²ÙŠØªÙˆÙ†",
            "Ø³Ù…Ø¨ÙˆØ³Ø©": "Ø¹Ø¬ÙŠÙ†Ø© Ù…Ù‚Ù„ÙŠØ© Ù…Ø­Ø´ÙˆØ© Ø¨Ø§Ù„Ù„Ø­Ù… Ø£Ùˆ Ø§Ù„Ø¬Ø¨Ù†",
            "ÙØ·Ø§Ø¦Ø± Ø³Ø¨Ø§Ù†Ø®": "ÙØ·Ø§Ø¦Ø± Ù…Ø®Ø¨ÙˆØ²Ø© Ù…Ø­Ø´ÙˆØ© Ø¨Ø§Ù„Ø³Ø¨Ø§Ù†Ø® ÙˆØ§Ù„Ø¨ØµÙ„",
            "Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø§Ø²Ø¬": "Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø§Ø²Ø¬ ÙˆÙ…Ø«Ù„Ø¬",
            "Ù‚Ù‡ÙˆØ© Ø³Ø§Ø®Ù†Ø©": "Ù‚Ù‡ÙˆØ© ØªØ±ÙƒÙŠØ© Ø£Ùˆ Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ Ø³Ø§Ø®Ù†Ø©",
            "Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ": "Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ Ø¨Ø§Ø±Ø¯ (ÙƒÙˆÙ„Ø§ØŒ Ø³Ø¨Ø±Ø§ÙŠØªØŒ ÙØ§Ù†ØªØ§)",
            "Ù…Ø§Ø¡ Ù…Ø¹Ø¯Ù†ÙŠ": "Ù…Ø§Ø¡ Ù…Ø¹Ø¯Ù†ÙŠ Ù…Ø¹Ø¨Ø£",
        };

        const extras = [
            "Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ© (5â‚ª)",
            "Ø¬Ø¨Ù†Ø© Ø¥Ø¶Ø§ÙÙŠØ© (3â‚ª)",
            "Ù…Ø®Ù„Ù„Ø§Øª (2â‚ª)",
            "ØµÙ„ØµØ© Ø­Ø§Ø±Ø© (2â‚ª)",
            "Ø®Ø¨Ø² Ø¥Ø¶Ø§ÙÙŠ (1â‚ª)",
            "Ù…Ø§ÙŠÙˆÙ†ÙŠØ²/ÙƒØ§ØªØ´Ø¨ (1â‚ª)"
        ];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³Ù„Ø© Ù…Ù† Local Storage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        function updateCartCount() {
            document.getElementById('cartCount').textContent = cart.length;
        }
        updateCartCount();

        // ----------------------------------------------------
        // ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± (Notification)
        // ----------------------------------------------------
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'error' ? '#f8d7da' : type === 'info' ? '#d1edff' : '#d4edda'};
                color: ${type === 'error' ? '#721c24' : type === 'info' ? '#0c5460' : '#155724'};
                padding: 15px 25px;
                border-radius: 50px;
                box-shadow: var(--shadow);
                z-index: 10000;
                font-weight: bold;
                animation: fadeInOut 3s ease;
                border: 1px solid ${type === 'error' ? '#f5c6cb' : type === 'info' ? '#bee5eb' : '#c3e6cb'};
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ----------------------------------------------------
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        // ----------------------------------------------------
        auth.onAuthStateChanged(user => {
            const userInfoDiv = document.getElementById('userInfo');
            const usernameDisplay = document.getElementById('usernameDisplay');
            
            if (user) {
                // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ù‡ØŒ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† DB
                db.ref('users/' + user.uid).once('value', snapshot => {
                    const userData = snapshot.val();
                    if (userData && userData.username) {
                        // 3. Ø¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                        usernameDisplay.textContent = `${userData.username}ØŒ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!`;
                        userInfoDiv.style.display = 'block';

                        // 4. Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„
                        if (userData.lastLoginTime) {
                            // ØªØ­ÙˆÙŠÙ„ ÙˆÙ‚Øª ISO Ø¥Ù„Ù‰ ØµÙŠØºØ© Ø¹Ø±Ø¨ÙŠØ© Ø³Ù‡Ù„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
                            const lastLogin = new Date(userData.lastLoginTime).toLocaleString('ar-EG', {
                                dateStyle: 'medium', timeStyle: 'short'
                            });
                            showNotification(`ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ! Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„: ${lastLogin}`, 'info');
                            
                            // Ù„Ù…Ù†Ø¹ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©ØŒ ÙŠÙ…ÙƒÙ† Ù…Ø³Ø­ Ø­Ù‚Ù„ lastLoginTime Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶Ù‡
                            // db.ref('users/' + user.uid).update({ lastLoginTime: firebase.database.ServerValue.TIMESTAMP });
                        }
                    } else {
                        // ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… (Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯)ØŒ Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø¹Ø§Ù…Ø©
                         usernameDisplay.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!`;
                         userInfoDiv.style.display = 'block';
                    }
                });

            } else {
                // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ù‡
                userInfoDiv.style.display = 'none';
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
            auth.signOut().then(() => {
                showNotification('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                setTimeout(() => {
                    window.location.href = 'index.html'; // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                }, 1500);
            }).catch(error => {
                showNotification('âŒ ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'error');
                console.error(error);
            });
        });

        // ----------------------------------------------------
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ùˆ Ø§Ù„Ø³Ù„Ø©
        // ----------------------------------------------------

        // ... (Ø¨Ù‚ÙŠØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ø«Ù„ categorizeMeals Ùˆ createMealCard) ...
        
        // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ±Øª Ø§Ù„ÙˆØ¬Ø¨Ø© (Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ù€ showModal)
        function createMealCard(meal, index) {
            const containerId = getContainerId(meal.category);
            const container = document.getElementById(containerId);

            const card = document.createElement("div");
            card.className = "meal-card";
            card.innerHTML = `
                ${meal.category === 'main' ? '<span class="badge">ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</span>' : ''}
                <img src="${meal.img}" alt="${meal.name}">
                <div class="meal-content">
                    <h3>${meal.name}</h3>
                    <p>${mealDescriptions[meal.name] || 'ÙˆØµÙ Ø´Ù‡ÙŠ Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¬Ø¨Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø©.'}</p>
                    <span class="price">â‚ª${meal.price}</span>
                    <button onclick="showModal(${index}, '${meal.category}')">
                        <i class="fas fa-cart-plus"></i> ${meal.hasExtras ? 'Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª' : 'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©'}
                    </button>
                </div>
            `;
            container.appendChild(card);
        }
        
        // ... (Ø¨Ù‚ÙŠØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ø«Ù„ getContainerId) ...

        function getContainerId(category) {
            const mapping = {
                'main': 'mainDishes',
                'italian': 'italianDishes',
                'home': 'homeDishes',
                'salads': 'salads',
                'sandwiches': 'sandwiches',
                'pastries': 'pastries',
                'drinks': 'drinks',
                'extras': 'extras'
            };

            return mapping[category];
        }

        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª (Modal) - **ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù„Ø¥Ø¶Ø§ÙØ© Ø­Ù…Ø§ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„**
        function showModal(mealIndex, category) {
            // 6. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù‚Ø¨Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ (Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©)
            if (!auth.currentUser) {
                showNotification('âš ï¸ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ù„Ù„Ø³Ù„Ø©', 'error');
                setTimeout(() => {
                    window.location.href = 'index.html'; // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                }, 2000);
                return;
            }
            
            const meal = meals.find((m, i) => getContainerId(m.category) === getContainerId(category) && meals.indexOf(m) === mealIndex);

            if (!meal) return;

            currentMeal = meal;

            document.getElementById('modalMealName').textContent = meal.name;
            document.getElementById('modalMealPrice').textContent = `â‚ª${meal.price}`;
            document.getElementById('modalMealDesc').textContent = mealDescriptions[meal.name] || 'ÙˆØµÙ Ø´Ù‡ÙŠ Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¬Ø¨Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø©.';
            document.getElementById('modalMealImg').src = meal.img;
            document.getElementById('modalMealImg').alt = meal.name;
            
            const extrasDiv = document.getElementById('modalExtras');
            const extrasGrid = document.getElementById('extrasGrid');
            const addToCartButton = document.getElementById('addToCartButton');

            if (meal.hasExtras) {
                extrasDiv.style.display = 'block';
                extrasGrid.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

                extras.forEach((extra, index) => {
                    const label = document.createElement('label');
                    label.innerHTML = `
                        <input type="checkbox" name="extra" value="${extra}" id="extra-${index}">
                        ${extra}
                    `;
                    extrasGrid.appendChild(label);
                });
                addToCartButton.textContent = 'Ø¥Ø¶Ø§ÙØ© Ù…Ø¹ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª';
            } else {
                extrasDiv.style.display = 'none';
                addToCartButton.textContent = 'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø©';
            }

            document.getElementById('extrasModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('extrasModal').style.display = 'none';
            currentMeal = null;
        }

        function addToCart() {
            if (!currentMeal) return;

            // 6. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ù„Ù„ØªØ£ÙƒÙŠØ¯ Ø¨Ø¹Ø¯ showModal)
            if (!auth.currentUser) {
                showNotification('âš ï¸ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ù„Ù„Ø³Ù„Ø©', 'error');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
                return;
            }

            let selectedExtras = [];
            let extraCost = 0;

            if (currentMeal.hasExtras) {
                const checkboxes = document.querySelectorAll('#extrasGrid input[type="checkbox"]:checked');
                checkboxes.forEach(checkbox => {
                    const extraName = checkbox.value.split('(')[0].trim();
                    const costMatch = checkbox.value.match(/\((\d+)â‚ª\)/);
                    if (costMatch) {
                        extraCost += parseInt(costMatch[1]);
                    }
                    selectedExtras.push(extraName);
                });
            }

            const finalPrice = currentMeal.price + extraCost;

            const cartItem = {
                name: currentMeal.name,
                price: finalPrice,
                img: currentMeal.img,
                extras: selectedExtras.length ? selectedExtras : null
            };

            cart.push(cartItem);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            closeModal();
            showNotification(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${currentMeal.name} Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©`, 'success');
        }

        // ... (Ø¨Ù‚ÙŠØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù) ...
        function categorizeMeals() {
            // ... (Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ...
            const containerIds = ['mainDishes', 'italianDishes', 'homeDishes', 'salads', 'sandwiches', 'pastries', 'drinks'];
            containerIds.forEach(id => document.getElementById(id).innerHTML = '');

            meals.forEach((meal, index) => {
                createMealCard(meal, index);
            });
        }
        
        function setupCategoryFilter() {
            // ... (Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ...
            const categoryBtns = document.querySelectorAll('.category-btn');
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const category = btn.dataset.category;
                    filterMealsByCategory(category);
                });
            });
        }
        
        function filterMealsByCategory(category) {
            // ... (Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ...
            const allSections = document.querySelectorAll('.container h2.section-title');
            const allMenuContainers = document.querySelectorAll('.container .menu-container');

            allSections.forEach(title => title.style.display = 'block');
            allMenuContainers.forEach(container => container.style.display = 'grid');

            if (category !== 'all') {
                allSections.forEach(title => {
                    if (title.getAttribute('data-category') !== category) {
                        title.style.display = 'none';
                    }
                });
                allMenuContainers.forEach(container => {
                    const containerCategory = Object.keys({
                        'mainDishes': 'main', 'italianDishes': 'italian', 'homeDishes': 'home', 'salads': 'salads',
                        'sandwiches': 'sandwiches', 'pastries': 'pastries', 'drinks': 'drinks'
                    }).find(key => key === container.id);
                    
                    if (containerCategory !== category) {
                        container.style.display = 'none';
                    }
                });
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', () => {
            categorizeMeals();
            setupCategoryFilter();
        });

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        window.onclick = function (event) {
            const modal = document.getElementById('extrasModal');
            if (event.target === modal) {
                closeModal();
            }
        };

    </script>
</body>
</html>
