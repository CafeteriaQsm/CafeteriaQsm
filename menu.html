<body>

    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fa-solid fa-utensils"></i>
                <span>كافيتيريا الكلية</span>
            </div>
            <div class="user-actions">
                <div class="user-info" id="userInfo">
                    <span>مرحباً، <span id="usernameDisplay"></span>!</span>
                    <button id="logoutBtn">تسجيل خروج</button>
                </div>
                <a href="cart.html" class="cart-link">
                    <i class="fa-solid fa-shopping-cart"></i>
                    السلة (<span id="cartCount">0</span>)
                </a>
            </div>
        </div>
    </header>

    <nav class="categories" id="categoriesNav">
        <button class="category-btn active" data-category="all">الكل</button>
    <button class="category-btn" data-category="main">وجبات رئيسية</button><button class="category-btn" data-category="italian">مأكولات إيطالية</button><button class="category-btn" data-category="home">أكل بيتي</button><button class="category-btn" data-category="salads">سلطات</button><button class="category-btn" data-category="sandwiches">ساندويتشات</button><button class="category-btn" data-category="pastries">معجنات</button><button class="category-btn" data-category="extras">إضافات منفردة</button><button class="category-btn" data-category="drinks">مشروبات</button></nav>

    <main class="container" id="menuContainer"><h2 class="section-title">وجبات رئيسية</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=SHAWARMA" alt="شاورما">
                            <div class="meal-content">
                                <h3>شاورما</h3>
                                <p>شرائح لحم متبلة ومطهوة على السيخ، تقدم في خبز من اختيارك.</p>
                                
                                <span class="price">ابتداءً من 20 شيكل</span>
                                <button onclick="openExtrasModal('شاورما')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=SCHNITZEL" alt="شنيتسل">
                            <div class="meal-content">
                                <h3>شنيتسل</h3>
                                <p>قطع دجاج متبلة ومقلية بالبقسماط، تقدم في خبز من اختيارك.</p>
                                
                                <span class="price">ابتداءً من 20 شيكل</span>
                                <button onclick="openExtrasModal('شنيتسل')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=CHICKEN+BREAST" alt="صدر دجاج">
                            <div class="meal-content">
                                <h3>صدر دجاج</h3>
                                <p>صدر دجاج مشوي على الجريل، خفيف ولذيذ، يقدم في خبز من اختيارك.</p>
                                
                                <span class="price">ابتداءً من 20 شيكل</span>
                                <button onclick="openExtrasModal('صدر دجاج')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=BURGER" alt="برجر">
                            <div class="meal-content">
                                <h3>برجر</h3>
                                <p>لحم بقر مفروم طازج ومشوي، يقدم في خبز خاص.</p>
                                
                                <span class="price">ابتداءً من 25 شيكل</span>
                                <button onclick="openExtrasModal('برجر')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=KABAB" alt="كباب">
                            <div class="meal-content">
                                <h3>كباب</h3>
                                <p>لحم متبل ومشوي على الفحم، يقدم في خبز من اختيارك.</p>
                                
                                <span class="price">ابتداءً من 25 شيكل</span>
                                <button onclick="openExtrasModal('كباب')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=SAUSAGE" alt="نقنيق">
                            <div class="meal-content">
                                <h3>نقنيق</h3>
                                <p>نقانق مقلية أو مشوية، سريعة ولذيذة، تقدم في خبز من اختيارك.</p>
                                
                                <span class="price">ابتداءً من 10 شيكل</span>
                                <button onclick="openExtrasModal('نقنيق')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=FALAFEL" alt="فلافل">
                            <div class="meal-content">
                                <h3>فلافل</h3>
                                <p>كرات فلافل مقلية مقرمشة، نباتية، تقدم في خبز من اختيارك.</p>
                                
                                <span class="price">ابتداءً من 10 شيكل</span>
                                <button onclick="openExtrasModal('فلافل')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div></div><h2 class="section-title">مأكولات إيطالية</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=POTATO+BECHAMEL" alt="بطاطا بشميل">
                            <div class="meal-content">
                                <h3>بطاطا بشميل</h3>
                                <p>بطاطا مخبوزة بصلصة البشاميل الغنية والجبنة.</p>
                                
                                <span class="price">ابتداءً من 30 شيكل</span>
                                <button onclick="openExtrasModal('بطاطا بشميل')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=PIZZA" alt="بيتسا">
                            <div class="meal-content">
                                <h3>بيتسا</h3>
                                <p>عجينة إيطالية بصلصة الطماطم والجبنة وإضافات من اختيارك.</p>
                                
                                <span class="price">ابتداءً من 15 شيكل</span>
                                <button onclick="openExtrasModal('بيتسا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=RAVIOLI+BECHAMEL" alt="رفيولي بشميل">
                            <div class="meal-content">
                                <h3>رفيولي بشميل</h3>
                                <p>عجينة الباستا محشوة، مغطاة بصلصة البشاميل.</p>
                                
                                <span class="price">ابتداءً من 30 شيكل</span>
                                <button onclick="openExtrasModal('رفيولي بشميل')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=CHICKEN+BECHAMEL" alt="صدر دجاج بشميل">
                            <div class="meal-content">
                                <h3>صدر دجاج بشميل</h3>
                                <p>صدر دجاج مطبوخ بصلصة البشاميل.</p>
                                
                                <span class="price">ابتداءً من 30 شيكل</span>
                                <button onclick="openExtrasModal('صدر دجاج بشميل')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div></div><h2 class="section-title">أكل بيتي</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=MUSAKHAN" alt="مسحب بالفرن">
                            <div class="meal-content">
                                <h3>مسحب بالفرن</h3>
                                <p>دجاج مسحب مطبوخ ببطء في الفرن.</p>
                                
                                <span class="price">40 شيكل</span>
                                <button onclick="openExtrasModal('مسحب بالفرن')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=GOULASH" alt="جولش">
                            <div class="meal-content">
                                <h3>جولش</h3>
                                <p>طعام تقليدي من اللحم والخضار المطبوخ ببطء.</p>
                                
                                <span class="price">40 شيكل</span>
                                <button onclick="openExtrasModal('جولش')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=VEAL+SLICES" alt="شرائح عجل بالفرن">
                            <div class="meal-content">
                                <h3>شرائح عجل بالفرن</h3>
                                <p>شرائح لحم العجل الطرية مطهوة بالفرن.</p>
                                
                                <span class="price">40 شيكل</span>
                                <button onclick="openExtrasModal('شرائح عجل بالفرن')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=CHICKEN+SLICES" alt="شرائح دجاج بالفرن">
                            <div class="meal-content">
                                <h3>شرائح دجاج بالفرن</h3>
                                <p>شرائح الدجاج المتبلة ومطهوة بالفرن.</p>
                                
                                <span class="price">40 شيكل</span>
                                <button onclick="openExtrasModal('شرائح دجاج بالفرن')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div></div><h2 class="section-title">سلطات</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=FATTOUSH" alt="فتوش بالجبن">
                            <div class="meal-content">
                                <h3>فتوش بالجبن</h3>
                                <p>سلطة فتوش تقليدية مع قطع من الجبن.</p>
                                
                                <span class="price">ابتداءً من 13 شيكل</span>
                                <button onclick="openExtrasModal('فتوش بالجبن')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=TABOULEH" alt="تبولة">
                            <div class="meal-content">
                                <h3>تبولة</h3>
                                <p>سلطة شرق أوسطية منعشة من البقدونس والبرغل.</p>
                                
                                <span class="price">ابتداءً من 13 شيكل</span>
                                <button onclick="openExtrasModal('تبولة')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=ARABIC+SALAD" alt="سلطة عربية">
                            <div class="meal-content">
                                <h3>سلطة عربية</h3>
                                <p>خضار موسمية مقطعة ناعماً مع صوص الليمون.</p>
                                
                                <span class="price">ابتداءً من 13 شيكل</span>
                                <button onclick="openExtrasModal('سلطة عربية')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=CHICKEN+SALAD" alt="سلطة صدر دجاج">
                            <div class="meal-content">
                                <h3>سلطة صدر دجاج</h3>
                                <p>سلطة خضراء مع قطع صدر دجاج مشوي.</p>
                                
                                <span class="price">ابتداءً من 20 شيكل</span>
                                <button onclick="openExtrasModal('سلطة صدر دجاج')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=TUNA+SALAD" alt="سلطة طونا">
                            <div class="meal-content">
                                <h3>سلطة طونا</h3>
                                <p>سلطة خضراء مع التونة.</p>
                                
                                <span class="price">ابتداءً من 20 شيكل</span>
                                <button onclick="openExtrasModal('سلطة طونا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div></div><h2 class="section-title">ساندويتشات</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=OMLETTE" alt="عجه">
                            <div class="meal-content">
                                <h3>عجه</h3>
                                <p>ساندويتش بيض مقلي بالخضار.</p>
                                
                                <span class="price">12 شيكل</span>
                                <button onclick="openExtrasModal('عجه')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=PASTRAMA" alt="بستراما">
                            <div class="meal-content">
                                <h3>بستراما</h3>
                                <p>ساندويتش شرائح لحم البستراما البارد.</p>
                                
                                <span class="price">10 شيكل</span>
                                <button onclick="openExtrasModal('بستراما')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=LABNEH" alt="لبنة">
                            <div class="meal-content">
                                <h3>لبنة</h3>
                                <p>ساندويتش باللبنة وزيت الزيتون.</p>
                                
                                <span class="price">10 شيكل</span>
                                <button onclick="openExtrasModal('لبنة')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=CHEESE+SANDWICH" alt="جبنة صفراء">
                            <div class="meal-content">
                                <h3>جبنة صفراء</h3>
                                <p>ساندويتش بالجبنة الصفراء.</p>
                                
                                <span class="price">10 شيكل</span>
                                <button onclick="openExtrasModal('جبنة صفراء')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=TOAST+LABNEH" alt="توست لبنة">
                            <div class="meal-content">
                                <h3>توست لبنة</h3>
                                <p>توست محمص باللبنة.</p>
                                
                                <span class="price">12 شيكل</span>
                                <button onclick="openExtrasModal('توست لبنة')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=TOAST+TUNA" alt="توست طونه">
                            <div class="meal-content">
                                <h3>توست طونه</h3>
                                <p>توست محمص بالتونة.</p>
                                
                                <span class="price">12 شيكل</span>
                                <button onclick="openExtrasModal('توست طونه')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=DRUZE+WRAP" alt="لفة درزية">
                            <div class="meal-content">
                                <h3>لفة درزية</h3>
                                <p>خبز الصاج مع الإضافات.</p>
                                
                                <span class="price">13 شيكل</span>
                                <button onclick="openExtrasModal('لفة درزية')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div></div><h2 class="section-title">معجنات</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=PIZZA+PASTRY" alt="معجنات بيتزا">
                            <div class="meal-content">
                                <h3>معجنات بيتزا</h3>
                                <p>معجنات بحشوة البيتزا.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات بيتزا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=ZAATAR+PASTRY" alt="معجنات زعتر">
                            <div class="meal-content">
                                <h3>معجنات زعتر</h3>
                                <p>معجنات بالزعتر وزيت الزيتون.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات زعتر')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=BEEF+PASTRY" alt="معجنات لحمه عجل">
                            <div class="meal-content">
                                <h3>معجنات لحمه عجل</h3>
                                <p>معجنات بحشوة لحم العجل.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات لحمه عجل')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=CHICKEN+PASTRY" alt="معجنات لحمه جاج">
                            <div class="meal-content">
                                <h3>معجنات لحمه جاج</h3>
                                <p>معجنات بحشوة لحم الدجاج.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات لحمه جاج')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=SPINACH+PASTRY" alt="معجنات سبانخ">
                            <div class="meal-content">
                                <h3>معجنات سبانخ</h3>
                                <p>معجنات بالسبانخ والليمون.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات سبانخ')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=TUNA+PASTRY" alt="معجنات طونه">
                            <div class="meal-content">
                                <h3>معجنات طونه</h3>
                                <p>معجنات بحشوة التونة.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات طونه')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=HOTDOG+PASTRY" alt="معجنات نقنيق">
                            <div class="meal-content">
                                <h3>معجنات نقنيق</h3>
                                <p>معجنات بحشوة النقانق.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات نقنيق')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=KIBBEH" alt="كبة">
                            <div class="meal-content">
                                <h3>كبة</h3>
                                <p>كرات الكبة المقلية.</p>
                                
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('كبة')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=MEAT+CIGAR" alt="سجاريوت لحمه">
                            <div class="meal-content">
                                <h3>سجاريوت لحمه</h3>
                                <p>لفائف باللحم.</p>
                                <span class="offer-text">عرض: 3 بـ 10 شيكل</span>
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('سجاريوت لحمه')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=POTATO+CIGAR" alt="سجاريوت بطاطا">
                            <div class="meal-content">
                                <h3>سجاريوت بطاطا</h3>
                                <p>لفائف بالبطاطا.</p>
                                <span class="offer-text">عرض: 3 بـ 10 شيكل</span>
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('سجاريوت بطاطا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=CHEESE+PASTRY" alt="معجنات جبنه بيضا">
                            <div class="meal-content">
                                <h3>معجنات جبنه بيضا</h3>
                                <p>معجنات بحشوة الجبنة البيضاء.</p>
                                <span class="offer-text">عرض: 4 بـ 10 شيكل</span>
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات جبنه بيضا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=OLIVE+PASTRY" alt="معجنات زيتون">
                            <div class="meal-content">
                                <h3>معجنات زيتون</h3>
                                <p>معجنات بالزيتون.</p>
                                <span class="offer-text">عرض: 4 بـ 10 شيكل</span>
                                <span class="price">4 شيكل</span>
                                <button onclick="openExtrasModal('معجنات زيتون')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div></div><h2 class="section-title">إضافات منفردة</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=FRIES" alt="بطاطا">
                            <div class="meal-content">
                                <h3>بطاطا</h3>
                                <p>بطاطا مقلية مقرمشة.</p>
                                
                                <span class="price">ابتداءً من 7 شيكل</span>
                                <button onclick="openExtrasModal('بطاطا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div></div><h2 class="section-title">مشروبات</h2><div class="menu-container"><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=COLD+DRINK" alt="اي مشروب بارد">
                            <div class="meal-content">
                                <h3>اي مشروب بارد</h3>
                                <p>مشروب غازي أو عصير معلب (6 شيكل).</p>
                                
                                <span class="price">6 شيكل</span>
                                <button onclick="openExtrasModal('اي مشروب بارد')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=HOGOMOGO" alt="HogoMogo">
                            <div class="meal-content">
                                <h3>HogoMogo</h3>
                                <p>مشروب طاقة / عصير خاص.</p>
                                
                                <span class="price">10 شيكل</span>
                                <button onclick="openExtrasModal('HogoMogo')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=FUZETEA" alt="فيوزتي">
                            <div class="meal-content">
                                <h3>فيوزتي</h3>
                                <p>شاي مثلج معلب.</p>
                                
                                <span class="price">8 شيكل</span>
                                <button onclick="openExtrasModal('فيوزتي')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=REDBULL" alt="ريدبول">
                            <div class="meal-content">
                                <h3>ريدبول</h3>
                                <p>مشروب طاقة ريدبول.</p>
                                
                                <span class="price">8 شيكل</span>
                                <button onclick="openExtrasModal('ريدبول')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=OLVERA" alt="اولفيرا">
                            <div class="meal-content">
                                <h3>اولفيرا</h3>
                                <p>مشروب أوليفيرا.</p>
                                
                                <span class="price">8 شيكل</span>
                                <button onclick="openExtrasModal('اولفيرا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=XL" alt="اكس ال">
                            <div class="meal-content">
                                <h3>اكس ال</h3>
                                <p>مشروب طاقة XL.</p>
                                
                                <span class="price">5 شيكل</span>
                                <button onclick="openExtrasModal('اكس ال')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=BLUE" alt="بلو">
                            <div class="meal-content">
                                <h3>بلو</h3>
                                <p>مشروب طاقة Blue.</p>
                                
                                <span class="price">5 شيكل</span>
                                <button onclick="openExtrasModal('بلو')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=WATER" alt="ماء">
                            <div class="meal-content">
                                <h3>ماء</h3>
                                <p>ماء معدني أو مياه شرب.</p>
                                
                                <span class="price">5 شيكل</span>
                                <button onclick="openExtrasModal('ماء')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=SAHLAB" alt="سحلب">
                            <div class="meal-content">
                                <h3>سحلب</h3>
                                <p>مشروب ساخن تقليدي.</p>
                                
                                <span class="price">ابتداءً من 10 شيكل</span>
                                <button onclick="openExtrasModal('سحلب')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/c62828/white?text=LEMONADE" alt="ليمونادا">
                            <div class="meal-content">
                                <h3>ليمونادا</h3>
                                <p>عصير ليمون منعش.</p>
                                
                                <span class="price">ابتداءً من 7 شيكل</span>
                                <button onclick="openExtrasModal('ليمونادا')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff9800/3e2723?text=ESPRESSO" alt="اسبرسو">
                            <div class="meal-content">
                                <h3>اسبرسو</h3>
                                <p>قهوة مركزة.</p>
                                
                                <span class="price">6 شيكل</span>
                                <button onclick="openExtrasModal('اسبرسو')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    إضافة مباشرة
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ff5f52/white?text=NESCAFE" alt="نسكافيه">
                            <div class="meal-content">
                                <h3>نسكافيه</h3>
                                <p>قهوة بالحليب.</p>
                                
                                <span class="price">ابتداءً من 6 شيكل</span>
                                <button onclick="openExtrasModal('نسكافيه')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/ffb74d/3e2723?text=HAFOUCH" alt="هفوخ">
                            <div class="meal-content">
                                <h3>هفوخ</h3>
                                <p>كابتشينو.</p>
                                
                                <span class="price">ابتداءً من 6 شيكل</span>
                                <button onclick="openExtrasModal('هفوخ')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div><div class="meal-card">
                            <img src="https://placehold.co/600x400/8e0000/white?text=TEA" alt="شاي">
                            <div class="meal-content">
                                <h3>شاي</h3>
                                <p>شاي ساخن.</p>
                                
                                <span class="price">ابتداءً من 5 شيكل</span>
                                <button onclick="openExtrasModal('شاي')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    اطلب بتخصيص
                                </button>
                            </div>
                        </div></div></main>

    <div id="extrasModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">×</span>
            <h2 id="modalMealName"></h2>

            <div id="sizeSection">
                <h3>اختر الحجم والسعر:</h3>
                <div class="size-options" id="sizeOptions">
                </div>
            </div>

            <div id="extrasSection">
                <h3>اختر الإضافات:</h3>
                <div class="extras-list" id="extrasList">
                </div>
            </div>

            <h3>ملاحظات خاصة (للبيتزا أو غيرها):</h3>
            <textarea id="notesInput" rows="3" placeholder="ملاحظاتك (مثال: بدون بصل، نصف تونة ونصف زيتون للبيتزا...)"></textarea>

            <div id="totalPriceDisplay">السعر الإجمالي: 0 شيكل</div>

            <div class="modal-footer">
                <div id="quantityControl">
                    <button onclick="decreaseQuantity()">-</button>
                    <span id="quantityDisplay">1</span>
                    <button onclick="increaseQuantity()">+</button>
                </div>
                <button onclick="addToCart()">إضافة إلى السلة</button>
            </div>
        </div>
    </div>

    <script>
        // =========================================
        // I. DATA STRUCTURES (البيانات الأساسية)
        // =========================================

        const MEAL_DESCRIPTIONS = {
            "شاورما": "شرائح لحم متبلة ومطهوة على السيخ، تقدم في خبز من اختيارك.",
            "شنيتسل": "قطع دجاج متبلة ومقلية بالبقسماط، تقدم في خبز من اختيارك.",
            "صدر دجاج": "صدر دجاج مشوي على الجريل، خفيف ولذيذ، يقدم في خبز من اختيارك.",
            "برجر": "لحم بقر مفروم طازج ومشوي، يقدم في خبز خاص.",
            "كباب": "لحم متبل ومشوي على الفحم، يقدم في خبز من اختيارك.",
            "نقنيق": "نقانق مقلية أو مشوية، سريعة ولذيذة، تقدم في خبز من اختيارك.",
            "فلافل": "كرات فلافل مقلية مقرمشة، نباتية، تقدم في خبز من اختيارك.",
            "بطاطا بشميل": "بطاطا مخبوزة بصلصة البشاميل الغنية والجبنة.",
            "بيتسا": "عجينة إيطالية بصلصة الطماطم والجبنة وإضافات من اختيارك.",
            "رفيولي بشميل": "عجينة الباستا محشوة، مغطاة بصلصة البشاميل.",
            "صدر دجاج بشميل": "صدر دجاج مطبوخ بصلصة البشاميل.",
            "مسحب بالفرن": "دجاج مسحب مطبوخ ببطء في الفرن.",
            "جولش": "طعام تقليدي من اللحم والخضار المطبوخ ببطء.",
            "شرائح عجل بالفرن": "شرائح لحم العجل الطرية مطهوة بالفرن.",
            "شرائح دجاج بالفرن": "شرائح الدجاج المتبلة ومطهوة بالفرن.",
            "فتوش بالجبن": "سلطة فتوش تقليدية مع قطع من الجبن.",
            "تبولة": "سلطة شرق أوسطية منعشة من البقدونس والبرغل.",
            "سلطة عربية": "خضار موسمية مقطعة ناعماً مع صوص الليمون.",
            "سلطة صدر دجاج": "سلطة خضراء مع قطع صدر دجاج مشوي.",
            "سلطة طونا": "سلطة خضراء مع التونة.",
            "عجه": "ساندويتش بيض مقلي بالخضار.",
            "بستراما": "ساندويتش شرائح لحم البستراما البارد.",
            "لبنة": "ساندويتش باللبنة وزيت الزيتون.",
            "جبنة صفراء": "ساندويتش بالجبنة الصفراء.",
            "توست لبنة": "توست محمص باللبنة.",
            "توست طونه": "توست محمص بالتونة.",
            "لفة درزية": "خبز الصاج مع الإضافات.",
            "معجنات بيتزا": "معجنات بحشوة البيتزا.",
            "معجنات زعتر": "معجنات بالزعتر وزيت الزيتون.",
            "معجنات لحمه عجل": "معجنات بحشوة لحم العجل.",
            "معجنات لحمه جاج": "معجنات بحشوة لحم الدجاج.",
            "معجنات سبانخ": "معجنات بالسبانخ والليمون.",
            "معجنات طونه": "معجنات بحشوة التونة.",
            "معجنات نقنيق": "معجنات بحشوة النقانق.",
            "كبة": "كرات الكبة المقلية.",
            "سجاريوت لحمه": "لفائف باللحم.",
            "سجاريوت بطاطا": "لفائف بالبطاطا.",
            "معجنات جبنه بيضا": "معجنات بحشوة الجبنة البيضاء.",
            "معجنات زيتون": "معجنات بالزيتون.",
            "سحلب": "مشروب ساخن تقليدي.",
            "ليمونادا": "عصير ليمون منعش.",
            "اسبرسو": "قهوة مركزة.",
            "نسكافيه": "قهوة بالحليب.",
            "هفوخ": "كابتشينو.",
            "شاي": "شاي ساخن.",
            "اي مشروب بارد": "مشروب غازي أو عصير معلب (6 شيكل).",
            "HogoMogo": "مشروب طاقة / عصير خاص.",
            "فيوزتي": "شاي مثلج معلب.",
            "ريدبول": "مشروب طاقة ريدبول.",
            "اولفيرا": "مشروب أوليفيرا.",
            "اكس ال": "مشروب طاقة XL.",
            "بلو": "مشروب طاقة Blue.",
            "ماء": "ماء معدني أو مياه شرب.",
            "بطاطا": "بطاطا مقلية مقرمشة.",
            "سجاريوت لحمه (عرض)": "3 بـ 10 شيكل",
            "سجاريوت بطاطا (عرض)": "3 بـ 10 شيكل",
            "معجنات جبنه بيضا (عرض)": "4 بـ 10 شيكل",
            "معجنات زيتون (عرض)": "4 بـ 10 شيكل",
        };

        // قائمة الإضافات الشاملة
        const MAIN_EXTRAS_LIST = [
            "سلطة عربية", "حمص", "ملفوف مايونيز", "ملفوف أحمر",
            "ملفوف أبيض", "خيار مكبوس", "بندورة", "بصل",
            "طونة", "زيتون", "ذرة", "كاتشوب",
            "مايونيز", "ألفاييم"
        ];

        // قائمة إضافات البيتزا
        const PIZZA_EXTRAS_LIST = [
            "طونة", "زيتون", "ذرة", "فقع", "خضار", "بندورة"
        ];

        // =========================================
        // II. MEALS ARRAY (مصفوفة الوجبات)
        // =========================================

        const meals = [
            // 🍔 وجبات رئيسية (Main Meals)
            {
                name: "شاورما",
                category: "main",
                img: "https://placehold.co/600x400/8e0000/white?text=SHAWARMA",
                sizes: { "بجيت": 25, "لخمنياه": 20 },
                extras: MAIN_EXTRAS_LIST
            },
            {
                name: "شنيتسل",
                category: "main",
                img: "https://placehold.co/600x400/c62828/white?text=SCHNITZEL",
                sizes: { "بجيت": 25, "لخمنياه": 20 },
                extras: MAIN_EXTRAS_LIST
            },
            {
                name: "صدر دجاج",
                category: "main",
                img: "https://placehold.co/600x400/ff5f52/white?text=CHICKEN+BREAST",
                sizes: { "بجيت": 25, "لخمنياه": 20 },
                extras: MAIN_EXTRAS_LIST
            },
            {
                name: "برجر",
                category: "main",
                img: "https://placehold.co/600x400/ffb74d/3e2723?text=BURGER",
                sizes: { "بجيت": 30, "لخمنياه": 25 },
                extras: MAIN_EXTRAS_LIST
            },
            {
                name: "كباب",
                category: "main",
                img: "https://placehold.co/600x400/8e0000/white?text=KABAB",
                sizes: { "بجيت": 30, "لخمنياه": 25 },
                extras: MAIN_EXTRAS_LIST
            },
            {
                name: "نقنيق",
                category: "main",
                img: "https://placehold.co/600x400/c62828/white?text=SAUSAGE",
                sizes: { "بجيت": 15, "لخمنياه": 10 },
                extras: MAIN_EXTRAS_LIST
            },
            {
                name: "فلافل",
                category: "main",
                img: "https://placehold.co/600x400/ff5f52/white?text=FALAFEL",
                sizes: { "بجيت": 15, "لخمنياه": 10 },
                extras: MAIN_EXTRAS_LIST
            },

            // 🍝 مأكولات ايطالية (Italian)
            {
                name: "بطاطا بشميل",
                category: "italian",
                img: "https://placehold.co/600x400/ffb74d/3e2723?text=POTATO+BECHAMEL",
                sizes: { "صغير": 30, "كبير": 40 },
                extras: []
            },
            {
                name: "بيتسا",
                category: "italian",
                img: "https://placehold.co/600x400/ff9800/3e2723?text=PIZZA",
                sizes: { "صغير": 15, "كبير": 50 },
                extras: PIZZA_EXTRAS_LIST,
                notes: "يمكن كتابة ملاحظات لتقسيم الإضافات (نصف/نصف) في خانة الملاحظات."
            },
            {
                name: "رفيولي بشميل",
                category: "italian",
                img: "https://placehold.co/600x400/8e0000/white?text=RAVIOLI+BECHAMEL",
                sizes: { "صغير": 30, "كبير": 40 },
                extras: []
            },
            {
                name: "صدر دجاج بشميل",
                category: "italian",
                img: "https://placehold.co/600x400/c62828/white?text=CHICKEN+BECHAMEL",
                sizes: { "صغير": 30, "كبير": 40 },
                extras: []
            },

            // 🍲 أكل بيتي (Home)
            { name: "مسحب بالفرن", category: "home", price: 40, img: "https://placehold.co/600x400/ff5f52/white?text=MUSAKHAN" },
            { name: "جولش", category: "home", price: 40, img: "https://placehold.co/600x400/ffb74d/3e2723?text=GOULASH" },
            { name: "شرائح عجل بالفرن", category: "home", price: 40, img: "https://placehold.co/600x400/8e0000/white?text=VEAL+SLICES" },
            { name: "شرائح دجاج بالفرن", category: "home", price: 40, img: "https://placehold.co/600x400/c62828/white?text=CHICKEN+SLICES" },

            // 🥗 سلطات (Salads)
            { name: "فتوش بالجبن", category: "salads", img: "https://placehold.co/600x400/ff9800/3e2723?text=FATTOUSH", sizes: { "صغير": 13, "وسط": 20, "كبير": 25 }, extras: [] },
            { name: "تبولة", category: "salads", img: "https://placehold.co/600x400/ff5f52/white?text=TABOULEH", sizes: { "صغير": 13, "وسط": 20, "كبير": 25 }, extras: [] },
            { name: "سلطة عربية", category: "salads", img: "https://placehold.co/600x400/ffb74d/3e2723?text=ARABIC+SALAD", sizes: { "صغير": 13, "وسط": 20, "كبير": 25 }, extras: [] },
            { name: "سلطة صدر دجاج", category: "salads", img: "https://placehold.co/600x400/8e0000/white?text=CHICKEN+SALAD", sizes: { "صغير": 20, "وسط": 25, "كبير": 30 }, extras: [] },
            { name: "سلطة طونا", category: "salads", img: "https://placehold.co/600x400/c62828/white?text=TUNA+SALAD", sizes: { "صغير": 20, "وسط": 25, "كبير": 30 }, extras: [] },

            // 🥪 ساندويتشات (Sandwiches)
            { name: "عجه", category: "sandwiches", price: 12, img: "https://placehold.co/600x400/ff9800/3e2723?text=OMLETTE", extras: MAIN_EXTRAS_LIST },
            { name: "بستراما", category: "sandwiches", price: 10, img: "https://placehold.co/600x400/ff5f52/white?text=PASTRAMA", extras: MAIN_EXTRAS_LIST },
            { name: "لبنة", category: "sandwiches", price: 10, img: "https://placehold.co/600x400/ffb74d/3e2723?text=LABNEH", extras: MAIN_EXTRAS_LIST },
            { name: "جبنة صفراء", category: "sandwiches", price: 10, img: "https://placehold.co/600x400/8e0000/white?text=CHEESE+SANDWICH", extras: MAIN_EXTRAS_LIST },
            { name: "توست لبنة", category: "sandwiches", price: 12, img: "https://placehold.co/600x400/c62828/white?text=TOAST+LABNEH", extras: [] },
            { name: "توست طونه", category: "sandwiches", price: 12, img: "https://placehold.co/600x400/ff9800/3e2723?text=TOAST+TUNA", extras: [] },
            { name: "لفة درزية", category: "sandwiches", price: 13, img: "https://placehold.co/600x400/ff5f52/white?text=DRUZE+WRAP", extras: ["تبولة"] },

            // 🥐 معجنات (Pastries)
            { name: "معجنات بيتزا", category: "pastries", price: 4, img: "https://placehold.co/600x400/ffb74d/3e2723?text=PIZZA+PASTRY" },
            { name: "معجنات زعتر", category: "pastries", price: 4, img: "https://placehold.co/600x400/8e0000/white?text=ZAATAR+PASTRY" },
            { name: "معجنات لحمه عجل", category: "pastries", price: 4, img: "https://placehold.co/600x400/c62828/white?text=BEEF+PASTRY" },
            { name: "معجنات لحمه جاج", category: "pastries", price: 4, img: "https://placehold.co/600x400/ff9800/3e2723?text=CHICKEN+PASTRY" },
            { name: "معجنات سبانخ", category: "pastries", price: 4, img: "https://placehold.co/600x400/ff5f52/white?text=SPINACH+PASTRY" },
            { name: "معجنات طونه", category: "pastries", price: 4, img: "https://placehold.co/600x400/ffb74d/3e2723?text=TUNA+PASTRY" },
            { name: "معجنات نقنيق", category: "pastries", price: 4, img: "https://placehold.co/600x400/8e0000/white?text=HOTDOG+PASTRY" },
            { name: "كبة", category: "pastries", price: 4, img: "https://placehold.co/600x400/c62828/white?text=KIBBEH" },
            { name: "سجاريوت لحمه", category: "pastries", price: 4, img: "https://placehold.co/600x400/ff9800/3e2723?text=MEAT+CIGAR", offer: "عرض: 3 بـ 10 شيكل" },
            { name: "سجاريوت بطاطا", category: "pastries", price: 4, img: "https://placehold.co/600x400/ff5f52/white?text=POTATO+CIGAR", offer: "عرض: 3 بـ 10 شيكل" },
            { name: "معجنات جبنه بيضا", category: "pastries", price: 4, img: "https://placehold.co/600x400/ffb74d/3e2723?text=CHEESE+PASTRY", offer: "عرض: 4 بـ 10 شيكل" },
            { name: "معجنات زيتون", category: "pastries", price: 4, img: "https://placehold.co/600x400/8e0000/white?text=OLIVE+PASTRY", offer: "عرض: 4 بـ 10 شيكل" },

            // 🍟 إضافات (Extras)
            { name: "بطاطا", category: "extras", img: "https://placehold.co/600x400/c62828/white?text=FRIES", sizes: { "صغير": 7, "كبير": 10 }, extras: [] },

            // 🥤 مشروبات (Drinks)
            { name: "اي مشروب بارد", category: "drinks", price: 6, img: "https://placehold.co/600x400/ff9800/3e2723?text=COLD+DRINK" },
            { name: "HogoMogo", category: "drinks", price: 10, img: "https://placehold.co/600x400/ff5f52/white?text=HOGOMOGO" },
            { name: "فيوزتي", category: "drinks", price: 8, img: "https://placehold.co/600x400/ffb74d/3e2723?text=FUZETEA" },
            { name: "ريدبول", category: "drinks", price: 8, img: "https://placehold.co/600x400/8e0000/white?text=REDBULL" },
            { name: "اولفيرا", category: "drinks", price: 8, img: "https://placehold.co/600x400/c62828/white?text=OLVERA" },
            { name: "اكس ال", category: "drinks", price: 5, img: "https://placehold.co/600x400/ff9800/3e2723?text=XL" },
            { name: "بلو", category: "drinks", price: 5, img: "https://placehold.co/600x400/ff5f52/white?text=BLUE" },
            { name: "ماء", category: "drinks", price: 5, img: "https://placehold.co/600x400/ffb74d/3e2723?text=WATER" },
            { name: "سحلب", category: "drinks", img: "https://placehold.co/600x400/8e0000/white?text=SAHLAB", sizes: { "صغير": 10, "كبير": 15 } },
            { name: "ليمونادا", category: "drinks", img: "https://placehold.co/600x400/c62828/white?text=LEMONADE", sizes: { "صغير": 7, "وسط": 10, "كبير": 12 } },
            { name: "اسبرسو", category: "drinks", price: 6, img: "https://placehold.co/600x400/ff9800/3e2723?text=ESPRESSO" },
            { name: "نسكافيه", category: "drinks", img: "https://placehold.co/600x400/ff5f52/white?text=NESCAFE", sizes: { "صغير": 6, "وسط": 8, "كبير": 10 } },
            { name: "هفوخ", category: "drinks", img: "https://placehold.co/600x400/ffb74d/3e2723?text=HAFOUCH", sizes: { "صغير": 6, "وسط": 8, "كبير": 10 } },
            { name: "شاي", category: "drinks", img: "https://placehold.co/600x400/8e0000/white?text=TEA", sizes: { "صغير": 5, "وسط": 6, "كبير": 7 } },
        ];

        // =========================================
        // III. GLOBAL STATE (الحالة العالمية)
        // =========================================

        let selectedMeal = null;
        let quantity = 1;
        let basePrice = 0;
        let selectedSize = '';

        // =========================================
        // IV. HELPER FUNCTIONS (الدوال المساعدة)
        // =========================================

        function translateCategory(category) {
            const translations = {
                "main": "وجبات رئيسية",
                "italian": "مأكولات إيطالية",
                "home": "أكل بيتي",
                "salads": "سلطات",
                "sandwiches": "ساندويتشات",
                "pastries": "معجنات",
                "drinks": "مشروبات",
                "extras": "إضافات منفردة"
            };
            return translations[category] || category;
        }

        function getMealDescription(mealName) {
            return MEAL_DESCRIPTIONS[mealName] || "وجبة لذيذة ومغذية.";
        }

        function calculateTotalPrice() {
            let total = basePrice;
            const finalPrice = total * quantity;
            document.getElementById('totalPriceDisplay').textContent = `السعر الإجمالي: ${finalPrice.toFixed(0)} شيكل`;
            return finalPrice;
        }

        function updatePriceOnSizeChange(price) {
            basePrice = price;
            calculateTotalPrice();
        }

        function decreaseQuantity() {
            if (quantity > 1) {
                quantity--;
                document.getElementById('quantityDisplay').textContent = quantity;
                calculateTotalPrice();
            }
        }

        function increaseQuantity() {
            quantity++;
            document.getElementById('quantityDisplay').textContent = quantity;
            calculateTotalPrice();
        }

        function closeModal() {
            document.getElementById('extrasModal').style.display = 'none';
            selectedMeal = null;
            quantity = 1;
            basePrice = 0;
            document.getElementById('quantityDisplay').textContent = 1;
            document.getElementById('notesInput').value = '';
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.className = 'notification';
            if (type === 'error') {
                notification.style.background = 'var(--primary-dark)';
            }
            document.body.appendChild(notification);
            setTimeout(() => { notification.remove(); }, 3000);
        }

        // =========================================
        // V. UI BUILDING FUNCTIONS (بناء واجهة المستخدم)
        // =========================================

        function createCategoryButtons() {
            const categoriesNav = document.getElementById('categoriesNav');
            const categories = [...new Set(meals.map(meal => meal.category))];

            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-btn';
                button.dataset.category = category;
                button.textContent = translateCategory(category);
                button.onclick = () => filterMeals(category, button);
                categoriesNav.appendChild(button);
            });
        }

        function displayMeals(filteredMeals) {
            const menuContainer = document.getElementById('menuContainer');
            menuContainer.innerHTML = '';

            const categorizedMeals = filteredMeals.reduce((acc, meal) => {
                const categoryName = translateCategory(meal.category);
                if (!acc[categoryName]) {
                    acc[categoryName] = [];
                }
                acc[categoryName].push(meal);
                return acc;
            }, {});

            for (const categoryName in categorizedMeals) {
                const sectionTitle = document.createElement('h2');
                sectionTitle.className = 'section-title';
                sectionTitle.textContent = categoryName;
                menuContainer.appendChild(sectionTitle);

                const mealGrid = document.createElement('div');
                mealGrid.className = 'menu-container';

                categorizedMeals[categoryName].forEach(meal => {
                    const card = document.createElement('div');
                    card.className = 'meal-card';

                    let priceDisplay;
                    if (meal.price) {
                        priceDisplay = `${meal.price} شيكل`;
                    } else if (meal.sizes) {
                        const minPrice = Math.min(...Object.values(meal.sizes));
                        priceDisplay = `ابتداءً من ${minPrice} شيكل`;
                    } else {
                        priceDisplay = "يرجى السؤال";
                    }

                    card.innerHTML = `
                            <img src="${meal.img || 'https://placehold.co/600x400'}" alt="${meal.name}">
                            <div class="meal-content">
                                <h3>${meal.name}</h3>
                                <p>${getMealDescription(meal.name)}</p>
                                ${meal.offer ? `<span class="offer-text">${meal.offer}</span>` : ''}
                                <span class="price">${priceDisplay}</span>
                                <button onclick="openExtrasModal('${meal.name}')">
                                    <i class="fa-solid fa-cart-plus"></i>
                                    ${meal.sizes || (meal.extras && meal.extras.length > 0) ? 'اطلب بتخصيص' : 'إضافة مباشرة'}
                                </button>
                            </div>
                        `;
                    mealGrid.appendChild(card);
                });

                menuContainer.appendChild(mealGrid);
            }
        }

        function filterMeals(category, clickedButton) {
            const buttons = document.querySelectorAll('.category-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            clickedButton.classList.add('active');

            const filtered = (category === 'all')
                ? meals
                : meals.filter(meal => meal.category === category);

            displayMeals(filtered);
        }

        function openExtrasModal(mealName) {
            selectedMeal = meals.find(m => m.name === mealName);
            if (!selectedMeal) return;

            document.getElementById('modalMealName').textContent = selectedMeal.name;

            const sizeSection = document.getElementById('sizeSection');
            const sizeOptionsContainer = document.getElementById('sizeOptions');
            sizeOptionsContainer.innerHTML = '';

            let defaultPrice = 0;
            let hasSizes = false;

            if (selectedMeal.sizes) {
                sizeSection.style.display = 'block';
                hasSizes = true;
                let isFirst = true;

                for (const size in selectedMeal.sizes) {
                    const price = selectedMeal.sizes[size];
                    const id = `size-${size}`;

                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = 'mealSize';
                    input.id = id;
                    input.value = size;
                    input.setAttribute('data-price', price);
                    input.onchange = () => {
                        selectedSize = size;
                        updatePriceOnSizeChange(price);
                    };

                    const label = document.createElement('label');
                    label.htmlFor = id;
                    label.textContent = `${size} (${price} شيكل)`;

                    sizeOptionsContainer.appendChild(input);
                    sizeOptionsContainer.appendChild(label);

                    if (isFirst) {
                        input.checked = true;
                        defaultPrice = price;
                        selectedSize = size;
                        isFirst = false;
                    }
                }
            } else {
                sizeSection.style.display = 'none';
                defaultPrice = selectedMeal.price || 0;
                selectedSize = 'حجم عادي';
            }

            updatePriceOnSizeChange(defaultPrice);

            const extrasSection = document.getElementById('extrasSection');
            const extrasListContainer = document.getElementById('extrasList');
            extrasListContainer.innerHTML = '';

            if (selectedMeal.extras && selectedMeal.extras.length > 0) {
                extrasSection.style.display = 'block';
                selectedMeal.extras.forEach((extra, index) => {
                    const id = `extra-${index}`;

                    const input = document.createElement('input');
                    input.type = 'checkbox';
                    input.id = id;
                    input.value = extra;
                    input.onchange = calculateTotalPrice;

                    const label = document.createElement('label');
                    label.htmlFor = id;
                    label.textContent = extra;

                    extrasListContainer.appendChild(input);
                    extrasListContainer.appendChild(label);
                });
            } else {
                extrasSection.style.display = 'none';
            }

            document.getElementById('extrasModal').style.display = 'block';

            const needsCustomization = hasSizes || (selectedMeal.extras && selectedMeal.extras.length > 0);
            if (!needsCustomization && !selectedMeal.price && !selectedMeal.sizes) {
                closeModal();
                addToCart(true);
            }
        }

        // 🔥 الإصلاح: دالة الإضافة إلى السلة المعدلة
        function addToCart(skipModal = false) {
            if (!selectedMeal) return;

            let itemDetails = {
                name: selectedMeal.name,
                price: basePrice,
                img: selectedMeal.img || 'https://placehold.co/600x400',
                size: selectedSize,
                extras: [],
                notes: document.getElementById('notesInput').value.trim(),
                id: Date.now() + Math.random()
            };

            if (!skipModal) {
                const extraCheckboxes = document.querySelectorAll('#extrasList input:checked');
                extraCheckboxes.forEach(checkbox => {
                    itemDetails.extras.push(checkbox.value);
                });

                if (selectedMeal.sizes && !selectedSize) {
                    showNotification('الرجاء اختيار الحجم أولاً', 'error');
                    return;
                }
                closeModal();
            } else {
                itemDetails.price = selectedMeal.price;
                itemDetails.size = 'حجم عادي';
            }

            // 🔥 الإصلاح: استخدام الهيكل الصحيح الذي تتوقعه صفحة السلة
            let order = JSON.parse(localStorage.getItem("order")) || { cart: [] };

            // إضافة العنصر إلى السلة
            for (let i = 0; i < quantity; i++) {
                order.cart.push({
                    ...itemDetails,
                    id: itemDetails.id + '-' + i
                });
            }

            // 🔥 الإصلاح: حفظ باستخدام المفتاح الصحيح
            localStorage.setItem("order", JSON.stringify(order));

            // تحديث العداد
            updateCartCount(order.cart.length);
            showNotification(`✅ تم إضافة ${itemDetails.name} (${itemDetails.size})`);
        }

        // 🔥 الإصلاح: دالة تحديث عداد السلة المعدلة
        function updateCartCount(count) {
            const order = JSON.parse(localStorage.getItem("order")) || { cart: [] };
            document.getElementById('cartCount').textContent = count || order.cart.length;
        }

        // =========================================
        // VI. INITIALIZATION (التشغيل الأولي)
        // =========================================

        function initialize() {
            createCategoryButtons();
            filterMeals('all', document.querySelector('.category-btn[data-category="all"]'));
            updateCartCount();

            const username = localStorage.getItem('username');
            const userInfoDiv = document.getElementById('userInfo');

            if (username) {
                document.getElementById('usernameDisplay').textContent = username;
                userInfoDiv.style.display = 'flex';
            }

            document.getElementById('logoutBtn').onclick = () => {
                localStorage.removeItem('username');
                window.location.reload();
            };

            window.onclick = function (event) {
                if (event.target == document.getElementById('extrasModal')) {
                    closeModal();
                }
            }
        }

        initialize();
    </script>

</body>
